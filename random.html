<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <label for="from">From: </label><input type="number" name="from" id="from" value="1">
    <br>
    <label for="to">To: </label><input type="number" name="to" id="to" value="100">
    <br>
    <button id="listen">Listen!</button>
    <p>Result: <span id="result"></span></p>

</body>
<scriptK="sha256-bbNosz5JlGdezcH8vxdbJ+b/hVKQTTRxrb+kM13pxc0=" crossorigin="anonymous">
    </script>
    <script>
        navigator.mediaDevices.getUserMedia({
                audio: true
            })
            .then(stream => {
                let fromN, toN;
                let btn = document.querySelector('#listen');
                btn.addEventListener('click', () => {
                    try {
                        toN = BigInt(document.querySelector('#to').value);
                        fromN = BigInt(document.querySelector('#from')
                            .value);
                        if (toN <= fromN) throw 'From < To';

                    } catch (e) {
                        alert(e);
                        return;
                    }
                    btn.disabled = true;
                    btn.innerText = 'Listening...';
                    const mediaRecorder = new MediaRecorder(stream);
                    mediaRecorder.start();

                    const audioChunks = [];
                    mediaRecorder.addEventListener("dataavailable", event => {
                        audioChunks.push(event.data);
                    });

                    mediaRecorder.addEventListener("stop", () => {
                        let data = audioChunks[0];
                        let reader = new FileReader();
                        reader.readAsArrayBuffer(data);
                        reader.onloadend = function () {
                            let byteArray = new Uint8Array(reader.result);
                            window.crypto.subtle.digest('SHA-512', reader.result).then(d => {
                                let byteArray = new Uint8Array(d);
                                let hex = [...byteArray].map(b => b.toString(16)
                                        .padStart(2,
                                            '0'))
                                    .join('');
                                document.querySelector('#result').innerText = (BigInt(
                                    '0x' + hex) % (toN - fromN) + fromN).toString();
                                btn.innerText = 'Listen!';
                                btn.disabled = false;
                            });
                        }
                    });

                    setTimeout(() => {
                        mediaRecorder.stop();
                    }, 1000);
                });
            });
    </script>

</html>